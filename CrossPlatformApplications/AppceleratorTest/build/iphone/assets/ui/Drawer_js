function DrawerGetLayout(e,t){var i={width:Ti.Platform.displayCaps.getPlatformWidth(),height:Ti.Platform.displayCaps.getPlatformHeight()},r={},a=20;return t&&(a+="iphone"==Ti.Platform.osname&&i.width>i.height?32:44),r.pullTabButton={left:(i.width-pullTabSize.width)/2,top:0,width:pullTabSize.width,height:pullTabSize.height},r.buttonBar={left:0,top:0,width:"auto",height:"auto"},r.view={left:0,top:i.height-pullTabSize.height-a,width:i.width,height:pullTabSize.height+iconSize.height},e&&(r.view.top-=iconSize.height),r}function DrawerRelayout(){var e=this,t=DrawerGetLayout(e.opened,!e.parent.navBarHidden);for(var i in t)if(t.hasOwnProperty(i))for(var r in t[i])t[i].hasOwnProperty(r)&&(e[i][r]=t[i][r])}function Drawer(e){function t(){i.relayout()}var i=this;return i.parent=e,i.opened=!1,i.pullTabButton=Ti.UI.createButton({backgroundImage:"/images/PullTab.png",opacity:opacity}),i.pullTabButton.addEventListener("click",function(){i.opened?i.close():i.open()}),i.buttonBar=Ti.UI.createView({backgroundColor:"black",opacity:opacity,layout:"horizontal"}),i.view=Ti.UI.createView({layout:"vertical"}),i.view.add(i.pullTabButton),i.view.add(i.buttonBar),i.relayout(),e.addEventListener("close",function(){Ti.Gesture.removeEventListener("orientationchange",t)}),Ti.Gesture.addEventListener("orientationchange",t),i}function DrawerOpen(){if(this.fireEvent("open",{source:this,type:"open"}),!this.opened){this.opened=!0;var e=DrawerGetLayout(this.opened,!this.parent.navBarHidden),t=Ti.UI.createAnimation({top:e.view.top,duration:speed});this.view.animate(t)}}function DrawerClose(){if(this.fireEvent("close",{source:this,type:"close"}),this.opened){this.opened=!1;var e=DrawerGetLayout(this.opened,!this.parent.navBarHidden),t=Ti.UI.createAnimation({top:e.view.top,duration:speed});this.view.animate(t)}}function DrawerAddEventListener(e,t){Ti.App.addEventListener("drawer."+e,t)}function DrawerRemoveEventListener(e,t){Ti.App.removeEventListener("drawer."+e,t)}function DrawerFireEvent(e,t){Ti.App.fireEvent("drawer."+e,t)}var pullTabSize={width:48,height:16},iconSize={width:48,height:48},opacity=.75,speed=500;Drawer.prototype.open=DrawerOpen,Drawer.prototype.close=DrawerClose,Drawer.prototype.addEventListener=DrawerAddEventListener,Drawer.prototype.removeEventListener=DrawerRemoveEventListener,Drawer.prototype.fireEvent=DrawerFireEvent,Drawer.prototype.relayout=DrawerRelayout,module.exports=Drawer;